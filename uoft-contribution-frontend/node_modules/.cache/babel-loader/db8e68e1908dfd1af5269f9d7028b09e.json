{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nrequire('./index.css');\n\nvar _reactFlipMove = require('react-flip-move');\n\nvar _reactFlipMove2 = _interopRequireDefault(_reactFlipMove);\n\nvar _UploadIcon = require('./UploadIcon.svg');\n\nvar _UploadIcon2 = _interopRequireDefault(_UploadIcon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar styles = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  flexWrap: \"wrap\",\n  width: \"100%\"\n};\nvar ERROR = {\n  NOT_SUPPORTED_EXTENSION: 'NOT_SUPPORTED_EXTENSION',\n  FILESIZE_TOO_LARGE: 'FILESIZE_TOO_LARGE'\n};\n\nvar ReactImageUploadComponent = function (_React$Component) {\n  _inherits(ReactImageUploadComponent, _React$Component);\n\n  function ReactImageUploadComponent(props) {\n    _classCallCheck(this, ReactImageUploadComponent);\n\n    var _this = _possibleConstructorReturn(this, (ReactImageUploadComponent.__proto__ || Object.getPrototypeOf(ReactImageUploadComponent)).call(this, props));\n\n    _this.state = {\n      pictures: [].concat(_toConsumableArray(props.defaultImages)),\n      files: [],\n      fileErrors: []\n    };\n    _this.inputElement = '';\n    _this.onDropFile = _this.onDropFile.bind(_this);\n    _this.onUploadClick = _this.onUploadClick.bind(_this);\n    _this.triggerFileUpload = _this.triggerFileUpload.bind(_this);\n    return _this;\n  }\n\n  _createClass(ReactImageUploadComponent, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      if (prevState.files !== this.state.files) {\n        this.props.onChange(this.state.files, this.state.pictures);\n      }\n    }\n    /*\n     Load image at the beggining if defaultImage prop exists\n     */\n\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.defaultImages !== this.props.defaultImages) {\n        this.setState({\n          pictures: nextProps.defaultImages\n        });\n      }\n    }\n    /*\n    Check file extension (onDropFile)\n    */\n\n  }, {\n    key: 'hasExtension',\n    value: function hasExtension(fileName) {\n      var pattern = '(' + this.props.imgExtension.join('|').replace(/\\./g, '\\\\.') + ')$';\n      return new RegExp(pattern, 'i').test(fileName);\n    }\n    /*\n     Handle file validation\n     */\n\n  }, {\n    key: 'onDropFile',\n    value: function onDropFile(e) {\n      var _this2 = this;\n\n      var files = e.target.files;\n      var allFilePromises = [];\n      var fileErrors = []; // Iterate over all uploaded files\n\n      for (var i = 0; i < files.length; i++) {\n        var file = files[i];\n        var fileError = {\n          name: file.name\n        }; // Check for file extension\n\n        if (!this.hasExtension(file.name)) {\n          fileError = Object.assign(fileError, {\n            type: ERROR.NOT_SUPPORTED_EXTENSION\n          });\n          fileErrors.push(fileError);\n          continue;\n        } // Check for file size\n\n\n        if (file.size > this.props.maxFileSize) {\n          fileError = Object.assign(fileError, {\n            type: ERROR.FILESIZE_TOO_LARGE\n          });\n          fileErrors.push(fileError);\n          continue;\n        }\n\n        allFilePromises.push(this.readFile(file));\n      }\n\n      this.setState({\n        fileErrors: fileErrors\n      });\n      var singleImage = this.props.singleImage;\n      Promise.all(allFilePromises).then(function (newFilesData) {\n        var dataURLs = singleImage ? [] : _this2.state.pictures.slice();\n        var files = singleImage ? [] : _this2.state.files.slice();\n        newFilesData.forEach(function (newFileData) {\n          dataURLs.push(newFileData.dataURL);\n          files.push(newFileData.file);\n        });\n\n        _this2.setState({\n          pictures: dataURLs,\n          files: files\n        });\n      });\n    }\n  }, {\n    key: 'onUploadClick',\n    value: function onUploadClick(e) {\n      // Fixes https://github.com/JakeHartnell/react-images-upload/issues/55\n      e.target.value = null;\n    }\n    /*\n       Read a file and return a promise that when resolved gives the file itself and the data URL\n     */\n\n  }, {\n    key: 'readFile',\n    value: function readFile(file) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader(); // Read the image via FileReader API and save image result in state.\n\n        reader.onload = function (e) {\n          // Add the file name to the data URL\n          var dataURL = e.target.result;\n          dataURL = dataURL.replace(\";base64\", ';name=' + file.name + ';base64');\n          resolve({\n            file: file,\n            dataURL: dataURL\n          });\n        };\n\n        reader.readAsDataURL(file);\n      });\n    }\n    /*\n     Remove the image from state\n     */\n\n  }, {\n    key: 'removeImage',\n    value: function removeImage(picture) {\n      var _this3 = this;\n\n      var removeIndex = this.state.pictures.findIndex(function (e) {\n        return e === picture;\n      });\n      var filteredPictures = this.state.pictures.filter(function (e, index) {\n        return index !== removeIndex;\n      });\n      var filteredFiles = this.state.files.filter(function (e, index) {\n        return index !== removeIndex;\n      });\n      this.setState({\n        pictures: filteredPictures,\n        files: filteredFiles\n      }, function () {\n        _this3.props.onChange(_this3.state.files, _this3.state.pictures);\n      });\n    }\n    /*\n     Check if any errors && render\n     */\n\n  }, {\n    key: 'renderErrors',\n    value: function renderErrors() {\n      var _this4 = this;\n\n      var fileErrors = this.state.fileErrors;\n      return fileErrors.map(function (fileError, index) {\n        return _react2.default.createElement('div', {\n          className: 'errorMessage ' + _this4.props.errorClass,\n          key: index,\n          style: _this4.props.errorStyle\n        }, '* ', fileError.name, ' ', fileError.type === ERROR.FILESIZE_TOO_LARGE ? _this4.props.fileSizeError : _this4.props.fileTypeError);\n      });\n    }\n    /*\n     Render the upload icon\n     */\n\n  }, {\n    key: 'renderIcon',\n    value: function renderIcon() {\n      if (this.props.withIcon) {\n        return _react2.default.createElement('img', {\n          src: _UploadIcon2.default,\n          className: 'uploadIcon',\n          alt: 'Upload Icon'\n        });\n      }\n    }\n    /*\n     Render label\n     */\n\n  }, {\n    key: 'renderLabel',\n    value: function renderLabel() {\n      if (this.props.withLabel) {\n        return _react2.default.createElement('p', {\n          className: this.props.labelClass,\n          style: this.props.labelStyles\n        }, this.props.label);\n      }\n    }\n    /*\n     Render preview images\n     */\n\n  }, {\n    key: 'renderPreview',\n    value: function renderPreview() {\n      return _react2.default.createElement('div', {\n        className: 'uploadPicturesWrapper'\n      }, _react2.default.createElement(_reactFlipMove2.default, {\n        enterAnimation: 'fade',\n        leaveAnimation: 'fade',\n        style: styles\n      }, this.renderPreviewPictures()));\n    }\n  }, {\n    key: 'renderPreviewPictures',\n    value: function renderPreviewPictures() {\n      var _this5 = this;\n\n      return this.state.pictures.map(function (picture, index) {\n        return _react2.default.createElement('div', {\n          key: index,\n          className: 'uploadPictureContainer'\n        }, _react2.default.createElement('div', {\n          className: 'deleteImage',\n          onClick: function onClick() {\n            return _this5.removeImage(picture);\n          }\n        }, 'X'), _react2.default.createElement('img', {\n          src: picture,\n          className: 'uploadPicture',\n          alt: 'preview'\n        }));\n      });\n    }\n    /*\n     On button click, trigger input file to open\n     */\n\n  }, {\n    key: 'triggerFileUpload',\n    value: function triggerFileUpload() {\n      this.inputElement.click();\n    }\n  }, {\n    key: 'clearPictures',\n    value: function clearPictures() {\n      this.setState({\n        pictures: []\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this6 = this;\n\n      return _react2.default.createElement('div', {\n        className: \"fileUploader \" + this.props.className,\n        style: this.props.style\n      }, _react2.default.createElement('div', {\n        className: 'fileContainer',\n        style: this.props.fileContainerStyle\n      }, this.renderIcon(), this.renderLabel(), _react2.default.createElement('div', {\n        className: 'errorsContainer'\n      }, this.renderErrors()), _react2.default.createElement('button', {\n        type: this.props.buttonType,\n        className: \"chooseFileButton \" + this.props.buttonClassName,\n        style: this.props.buttonStyles,\n        onClick: this.triggerFileUpload\n      }, this.props.buttonText), _react2.default.createElement('input', {\n        type: 'file',\n        ref: function ref(input) {\n          return _this6.inputElement = input;\n        },\n        name: this.props.name,\n        multiple: !this.props.singleImage,\n        onChange: this.onDropFile,\n        onClick: this.onUploadClick,\n        accept: this.props.accept\n      }), this.props.withPreview ? this.renderPreview() : null));\n    }\n  }]);\n\n  return ReactImageUploadComponent;\n}(_react2.default.Component);\n\nReactImageUploadComponent.defaultProps = {\n  className: '',\n  fileContainerStyle: {},\n  buttonClassName: \"\",\n  buttonStyles: {},\n  withPreview: false,\n  accept: \"image/*\",\n  name: \"\",\n  withIcon: true,\n  buttonText: \"Choose images\",\n  buttonType: \"button\",\n  withLabel: true,\n  label: \"Max file size: 5mb, accepted: jpg|gif|png\",\n  labelStyles: {},\n  labelClass: \"\",\n  imgExtension: ['.jpg', '.jpeg', '.gif', '.png'],\n  maxFileSize: 5242880,\n  fileSizeError: \" file size is too big\",\n  fileTypeError: \" is not a supported file extension\",\n  errorClass: \"\",\n  style: {},\n  errorStyle: {},\n  singleImage: false,\n  onChange: function onChange() {},\n  defaultImages: []\n};\nReactImageUploadComponent.propTypes = {\n  style: _propTypes2.default.object,\n  fileContainerStyle: _propTypes2.default.object,\n  className: _propTypes2.default.string,\n  onChange: _propTypes2.default.func,\n  onDelete: _propTypes2.default.func,\n  buttonClassName: _propTypes2.default.string,\n  buttonStyles: _propTypes2.default.object,\n  buttonType: _propTypes2.default.string,\n  withPreview: _propTypes2.default.bool,\n  accept: _propTypes2.default.string,\n  name: _propTypes2.default.string,\n  withIcon: _propTypes2.default.bool,\n  buttonText: _propTypes2.default.string,\n  withLabel: _propTypes2.default.bool,\n  label: _propTypes2.default.string,\n  labelStyles: _propTypes2.default.object,\n  labelClass: _propTypes2.default.string,\n  imgExtension: _propTypes2.default.array,\n  maxFileSize: _propTypes2.default.number,\n  fileSizeError: _propTypes2.default.string,\n  fileTypeError: _propTypes2.default.string,\n  errorClass: _propTypes2.default.string,\n  errorStyle: _propTypes2.default.object,\n  singleImage: _propTypes2.default.bool,\n  defaultImages: _propTypes2.default.array\n};\nexports.default = ReactImageUploadComponent;","map":{"version":3,"sources":["/Users/hongxu/Documents/ECE444/WebSiteBot_PS5/uoft-contribution-frontend/node_modules/react-images-upload/compiled.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_reactFlipMove","_reactFlipMove2","_UploadIcon","_UploadIcon2","obj","__esModule","default","_toConsumableArray","arr","Array","isArray","arr2","from","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","styles","display","alignItems","justifyContent","flexWrap","width","ERROR","NOT_SUPPORTED_EXTENSION","FILESIZE_TOO_LARGE","ReactImageUploadComponent","_React$Component","_this","getPrototypeOf","state","pictures","concat","defaultImages","files","fileErrors","inputElement","onDropFile","bind","onUploadClick","triggerFileUpload","componentDidUpdate","prevProps","prevState","snapshot","onChange","componentWillReceiveProps","nextProps","setState","hasExtension","fileName","pattern","imgExtension","join","replace","RegExp","test","e","_this2","allFilePromises","file","fileError","name","assign","type","push","size","maxFileSize","readFile","singleImage","Promise","all","then","newFilesData","dataURLs","slice","forEach","newFileData","dataURL","resolve","reject","reader","FileReader","onload","result","readAsDataURL","removeImage","picture","_this3","removeIndex","findIndex","filteredPictures","filter","index","filteredFiles","renderErrors","_this4","map","createElement","className","errorClass","style","errorStyle","fileSizeError","fileTypeError","renderIcon","withIcon","src","alt","renderLabel","withLabel","labelClass","labelStyles","label","renderPreview","enterAnimation","leaveAnimation","renderPreviewPictures","_this5","onClick","click","clearPictures","render","_this6","fileContainerStyle","buttonType","buttonClassName","buttonStyles","buttonText","ref","input","multiple","accept","withPreview","Component","defaultProps","propTypes","object","string","func","onDelete","bool","array","number"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;;AAIA,IAAIC,YAAY,GAAG,YAAY;AAAE,WAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AAAE,UAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;AAA2BE,MAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AAAwDD,MAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AAAgC,UAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAA4Bb,MAAAA,MAAM,CAACC,cAAP,CAAsBK,MAAtB,EAA8BI,UAAU,CAACI,GAAzC,EAA8CJ,UAA9C;AAA4D;AAAE;;AAAC,SAAO,UAAUK,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,QAAID,UAAJ,EAAgBX,gBAAgB,CAACU,WAAW,CAACG,SAAb,EAAwBF,UAAxB,CAAhB;AAAqD,QAAIC,WAAJ,EAAiBZ,gBAAgB,CAACU,WAAD,EAAcE,WAAd,CAAhB;AAA4C,WAAOF,WAAP;AAAqB,GAAhN;AAAmN,CAA9hB,EAAnB;;AAEA,IAAII,MAAM,GAAGC,OAAO,CAAC,OAAD,CAApB;;AAEA,IAAIC,OAAO,GAAGC,sBAAsB,CAACH,MAAD,CAApC;;AAEA,IAAII,UAAU,GAAGH,OAAO,CAAC,YAAD,CAAxB;;AAEA,IAAII,WAAW,GAAGF,sBAAsB,CAACC,UAAD,CAAxC;;AAEAH,OAAO,CAAC,aAAD,CAAP;;AAEA,IAAIK,cAAc,GAAGL,OAAO,CAAC,iBAAD,CAA5B;;AAEA,IAAIM,eAAe,GAAGJ,sBAAsB,CAACG,cAAD,CAA5C;;AAEA,IAAIE,WAAW,GAAGP,OAAO,CAAC,kBAAD,CAAzB;;AAEA,IAAIQ,YAAY,GAAGN,sBAAsB,CAACK,WAAD,CAAzC;;AAEA,SAASL,sBAAT,CAAgCO,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEE,IAAAA,OAAO,EAAEF;AAAX,GAArC;AAAwD;;AAE/F,SAASG,kBAAT,CAA4BC,GAA5B,EAAiC;AAAE,MAAIC,KAAK,CAACC,OAAN,CAAcF,GAAd,CAAJ,EAAwB;AAAE,SAAK,IAAIzB,CAAC,GAAG,CAAR,EAAW4B,IAAI,GAAGF,KAAK,CAACD,GAAG,CAACxB,MAAL,CAA5B,EAA0CD,CAAC,GAAGyB,GAAG,CAACxB,MAAlD,EAA0DD,CAAC,EAA3D,EAA+D;AAAE4B,MAAAA,IAAI,CAAC5B,CAAD,CAAJ,GAAUyB,GAAG,CAACzB,CAAD,CAAb;AAAmB;;AAAC,WAAO4B,IAAP;AAAc,GAA7H,MAAmI;AAAE,WAAOF,KAAK,CAACG,IAAN,CAAWJ,GAAX,CAAP;AAAyB;AAAE;;AAEnM,SAASK,eAAT,CAAyBC,QAAzB,EAAmCxB,WAAnC,EAAgD;AAAE,MAAI,EAAEwB,QAAQ,YAAYxB,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIyB,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,0BAAT,CAAoCC,IAApC,EAA0CC,IAA1C,EAAgD;AAAE,MAAI,CAACD,IAAL,EAAW;AAAE,UAAM,IAAIE,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOD,IAAI,KAAK,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAJ,GAAmEA,IAAnE,GAA0ED,IAAjF;AAAwF;;AAEhP,SAASG,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,UAAM,IAAIP,SAAJ,CAAc,6DAA6D,OAAOO,UAAlF,CAAN;AAAsG;;AAACD,EAAAA,QAAQ,CAAC5B,SAAT,GAAqBlB,MAAM,CAACgD,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAAC7B,SAAvC,EAAkD;AAAE+B,IAAAA,WAAW,EAAE;AAAE9C,MAAAA,KAAK,EAAE2C,QAAT;AAAmBnC,MAAAA,UAAU,EAAE,KAA/B;AAAsCE,MAAAA,QAAQ,EAAE,IAAhD;AAAsDD,MAAAA,YAAY,EAAE;AAApE;AAAf,GAAlD,CAArB;AAAqK,MAAImC,UAAJ,EAAgB/C,MAAM,CAACkD,cAAP,GAAwBlD,MAAM,CAACkD,cAAP,CAAsBJ,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,QAAQ,CAACK,SAAT,GAAqBJ,UAA3F;AAAwG;;AAE9e,IAAIK,MAAM,GAAG;AACXC,EAAAA,OAAO,EAAE,MADE;AAEXC,EAAAA,UAAU,EAAE,QAFD;AAGXC,EAAAA,cAAc,EAAE,QAHL;AAIXC,EAAAA,QAAQ,EAAE,MAJC;AAKXC,EAAAA,KAAK,EAAE;AALI,CAAb;AAQA,IAAIC,KAAK,GAAG;AACVC,EAAAA,uBAAuB,EAAE,yBADf;AAEVC,EAAAA,kBAAkB,EAAE;AAFV,CAAZ;;AAKA,IAAIC,yBAAyB,GAAG,UAAUC,gBAAV,EAA4B;AAC1DjB,EAAAA,SAAS,CAACgB,yBAAD,EAA4BC,gBAA5B,CAAT;;AAEA,WAASD,yBAAT,CAAmCtD,KAAnC,EAA0C;AACxC+B,IAAAA,eAAe,CAAC,IAAD,EAAOuB,yBAAP,CAAf;;AAEA,QAAIE,KAAK,GAAGtB,0BAA0B,CAAC,IAAD,EAAO,CAACoB,yBAAyB,CAACV,SAA1B,IAAuCnD,MAAM,CAACgE,cAAP,CAAsBH,yBAAtB,CAAxC,EAA0FlB,IAA1F,CAA+F,IAA/F,EAAqGpC,KAArG,CAAP,CAAtC;;AAEAwD,IAAAA,KAAK,CAACE,KAAN,GAAc;AACZC,MAAAA,QAAQ,EAAE,GAAGC,MAAH,CAAUnC,kBAAkB,CAACzB,KAAK,CAAC6D,aAAP,CAA5B,CADE;AAEZC,MAAAA,KAAK,EAAE,EAFK;AAGZC,MAAAA,UAAU,EAAE;AAHA,KAAd;AAKAP,IAAAA,KAAK,CAACQ,YAAN,GAAqB,EAArB;AACAR,IAAAA,KAAK,CAACS,UAAN,GAAmBT,KAAK,CAACS,UAAN,CAAiBC,IAAjB,CAAsBV,KAAtB,CAAnB;AACAA,IAAAA,KAAK,CAACW,aAAN,GAAsBX,KAAK,CAACW,aAAN,CAAoBD,IAApB,CAAyBV,KAAzB,CAAtB;AACAA,IAAAA,KAAK,CAACY,iBAAN,GAA0BZ,KAAK,CAACY,iBAAN,CAAwBF,IAAxB,CAA6BV,KAA7B,CAA1B;AACA,WAAOA,KAAP;AACD;;AAED3D,EAAAA,YAAY,CAACyD,yBAAD,EAA4B,CAAC;AACvC/C,IAAAA,GAAG,EAAE,oBADkC;AAEvCX,IAAAA,KAAK,EAAE,SAASyE,kBAAT,CAA4BC,SAA5B,EAAuCC,SAAvC,EAAkDC,QAAlD,EAA4D;AACjE,UAAID,SAAS,CAACT,KAAV,KAAoB,KAAKJ,KAAL,CAAWI,KAAnC,EAA0C;AACxC,aAAK9D,KAAL,CAAWyE,QAAX,CAAoB,KAAKf,KAAL,CAAWI,KAA/B,EAAsC,KAAKJ,KAAL,CAAWC,QAAjD;AACD;AACF;AAED;AACJ;AACA;;AAV2C,GAAD,EAYrC;AACDpD,IAAAA,GAAG,EAAE,2BADJ;AAEDX,IAAAA,KAAK,EAAE,SAAS8E,yBAAT,CAAmCC,SAAnC,EAA8C;AACnD,UAAIA,SAAS,CAACd,aAAV,KAA4B,KAAK7D,KAAL,CAAW6D,aAA3C,EAA0D;AACxD,aAAKe,QAAL,CAAc;AAAEjB,UAAAA,QAAQ,EAAEgB,SAAS,CAACd;AAAtB,SAAd;AACD;AACF;AAED;AACJ;AACA;;AAVK,GAZqC,EAwBrC;AACDtD,IAAAA,GAAG,EAAE,cADJ;AAEDX,IAAAA,KAAK,EAAE,SAASiF,YAAT,CAAsBC,QAAtB,EAAgC;AACrC,UAAIC,OAAO,GAAG,MAAM,KAAK/E,KAAL,CAAWgF,YAAX,CAAwBC,IAAxB,CAA6B,GAA7B,EAAkCC,OAAlC,CAA0C,KAA1C,EAAiD,KAAjD,CAAN,GAAgE,IAA9E;AACA,aAAO,IAAIC,MAAJ,CAAWJ,OAAX,EAAoB,GAApB,EAAyBK,IAAzB,CAA8BN,QAA9B,CAAP;AACD;AAED;AACJ;AACA;;AATK,GAxBqC,EAmCrC;AACDvE,IAAAA,GAAG,EAAE,YADJ;AAEDX,IAAAA,KAAK,EAAE,SAASqE,UAAT,CAAoBoB,CAApB,EAAuB;AAC5B,UAAIC,MAAM,GAAG,IAAb;;AAEA,UAAIxB,KAAK,GAAGuB,CAAC,CAACtF,MAAF,CAAS+D,KAArB;AACA,UAAIyB,eAAe,GAAG,EAAtB;AACA,UAAIxB,UAAU,GAAG,EAAjB,CAL4B,CAO5B;;AACA,WAAK,IAAI9D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6D,KAAK,CAAC5D,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,YAAIuF,IAAI,GAAG1B,KAAK,CAAC7D,CAAD,CAAhB;AACA,YAAIwF,SAAS,GAAG;AACdC,UAAAA,IAAI,EAAEF,IAAI,CAACE;AADG,SAAhB,CAFqC,CAKrC;;AACA,YAAI,CAAC,KAAKb,YAAL,CAAkBW,IAAI,CAACE,IAAvB,CAAL,EAAmC;AACjCD,UAAAA,SAAS,GAAGhG,MAAM,CAACkG,MAAP,CAAcF,SAAd,EAAyB;AACnCG,YAAAA,IAAI,EAAEzC,KAAK,CAACC;AADuB,WAAzB,CAAZ;AAGAW,UAAAA,UAAU,CAAC8B,IAAX,CAAgBJ,SAAhB;AACA;AACD,SAZoC,CAarC;;;AACA,YAAID,IAAI,CAACM,IAAL,GAAY,KAAK9F,KAAL,CAAW+F,WAA3B,EAAwC;AACtCN,UAAAA,SAAS,GAAGhG,MAAM,CAACkG,MAAP,CAAcF,SAAd,EAAyB;AACnCG,YAAAA,IAAI,EAAEzC,KAAK,CAACE;AADuB,WAAzB,CAAZ;AAGAU,UAAAA,UAAU,CAAC8B,IAAX,CAAgBJ,SAAhB;AACA;AACD;;AAEDF,QAAAA,eAAe,CAACM,IAAhB,CAAqB,KAAKG,QAAL,CAAcR,IAAd,CAArB;AACD;;AAED,WAAKZ,QAAL,CAAc;AACZb,QAAAA,UAAU,EAAEA;AADA,OAAd;AAIA,UAAIkC,WAAW,GAAG,KAAKjG,KAAL,CAAWiG,WAA7B;AAGAC,MAAAA,OAAO,CAACC,GAAR,CAAYZ,eAAZ,EAA6Ba,IAA7B,CAAkC,UAAUC,YAAV,EAAwB;AACxD,YAAIC,QAAQ,GAAGL,WAAW,GAAG,EAAH,GAAQX,MAAM,CAAC5B,KAAP,CAAaC,QAAb,CAAsB4C,KAAtB,EAAlC;AACA,YAAIzC,KAAK,GAAGmC,WAAW,GAAG,EAAH,GAAQX,MAAM,CAAC5B,KAAP,CAAaI,KAAb,CAAmByC,KAAnB,EAA/B;AAEAF,QAAAA,YAAY,CAACG,OAAb,CAAqB,UAAUC,WAAV,EAAuB;AAC1CH,UAAAA,QAAQ,CAACT,IAAT,CAAcY,WAAW,CAACC,OAA1B;AACA5C,UAAAA,KAAK,CAAC+B,IAAN,CAAWY,WAAW,CAACjB,IAAvB;AACD,SAHD;;AAKAF,QAAAA,MAAM,CAACV,QAAP,CAAgB;AAAEjB,UAAAA,QAAQ,EAAE2C,QAAZ;AAAsBxC,UAAAA,KAAK,EAAEA;AAA7B,SAAhB;AACD,OAVD;AAWD;AArDA,GAnCqC,EAyFrC;AACDvD,IAAAA,GAAG,EAAE,eADJ;AAEDX,IAAAA,KAAK,EAAE,SAASuE,aAAT,CAAuBkB,CAAvB,EAA0B;AAC/B;AACAA,MAAAA,CAAC,CAACtF,MAAF,CAASH,KAAT,GAAiB,IAAjB;AACD;AAED;AACJ;AACA;;AATK,GAzFqC,EAoGrC;AACDW,IAAAA,GAAG,EAAE,UADJ;AAEDX,IAAAA,KAAK,EAAE,SAASoG,QAAT,CAAkBR,IAAlB,EAAwB;AAC7B,aAAO,IAAIU,OAAJ,CAAY,UAAUS,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,YAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb,CAD4C,CAG5C;;AACAD,QAAAA,MAAM,CAACE,MAAP,GAAgB,UAAU1B,CAAV,EAAa;AAC3B;AACA,cAAIqB,OAAO,GAAGrB,CAAC,CAACtF,MAAF,CAASiH,MAAvB;AACAN,UAAAA,OAAO,GAAGA,OAAO,CAACxB,OAAR,CAAgB,SAAhB,EAA2B,WAAWM,IAAI,CAACE,IAAhB,GAAuB,SAAlD,CAAV;AACAiB,UAAAA,OAAO,CAAC;AAAEnB,YAAAA,IAAI,EAAEA,IAAR;AAAckB,YAAAA,OAAO,EAAEA;AAAvB,WAAD,CAAP;AACD,SALD;;AAOAG,QAAAA,MAAM,CAACI,aAAP,CAAqBzB,IAArB;AACD,OAZM,CAAP;AAaD;AAED;AACJ;AACA;;AApBK,GApGqC,EA0HrC;AACDjF,IAAAA,GAAG,EAAE,aADJ;AAEDX,IAAAA,KAAK,EAAE,SAASsH,WAAT,CAAqBC,OAArB,EAA8B;AACnC,UAAIC,MAAM,GAAG,IAAb;;AAEA,UAAIC,WAAW,GAAG,KAAK3D,KAAL,CAAWC,QAAX,CAAoB2D,SAApB,CAA8B,UAAUjC,CAAV,EAAa;AAC3D,eAAOA,CAAC,KAAK8B,OAAb;AACD,OAFiB,CAAlB;AAGA,UAAII,gBAAgB,GAAG,KAAK7D,KAAL,CAAWC,QAAX,CAAoB6D,MAApB,CAA2B,UAAUnC,CAAV,EAAaoC,KAAb,EAAoB;AACpE,eAAOA,KAAK,KAAKJ,WAAjB;AACD,OAFsB,CAAvB;AAGA,UAAIK,aAAa,GAAG,KAAKhE,KAAL,CAAWI,KAAX,CAAiB0D,MAAjB,CAAwB,UAAUnC,CAAV,EAAaoC,KAAb,EAAoB;AAC9D,eAAOA,KAAK,KAAKJ,WAAjB;AACD,OAFmB,CAApB;AAIA,WAAKzC,QAAL,CAAc;AAAEjB,QAAAA,QAAQ,EAAE4D,gBAAZ;AAA8BzD,QAAAA,KAAK,EAAE4D;AAArC,OAAd,EAAoE,YAAY;AAC9EN,QAAAA,MAAM,CAACpH,KAAP,CAAayE,QAAb,CAAsB2C,MAAM,CAAC1D,KAAP,CAAaI,KAAnC,EAA0CsD,MAAM,CAAC1D,KAAP,CAAaC,QAAvD;AACD,OAFD;AAGD;AAED;AACJ;AACA;;AAtBK,GA1HqC,EAkJrC;AACDpD,IAAAA,GAAG,EAAE,cADJ;AAEDX,IAAAA,KAAK,EAAE,SAAS+H,YAAT,GAAwB;AAC7B,UAAIC,MAAM,GAAG,IAAb;;AAEA,UAAI7D,UAAU,GAAG,KAAKL,KAAL,CAAWK,UAA5B;AAEA,aAAOA,UAAU,CAAC8D,GAAX,CAAe,UAAUpC,SAAV,EAAqBgC,KAArB,EAA4B;AAChD,eAAO3G,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CACL,KADK,EAEL;AAAEC,UAAAA,SAAS,EAAE,kBAAkBH,MAAM,CAAC5H,KAAP,CAAagI,UAA5C;AAAwDzH,UAAAA,GAAG,EAAEkH,KAA7D;AAAoEQ,UAAAA,KAAK,EAAEL,MAAM,CAAC5H,KAAP,CAAakI;AAAxF,SAFK,EAGL,IAHK,EAILzC,SAAS,CAACC,IAJL,EAKL,GALK,EAMLD,SAAS,CAACG,IAAV,KAAmBzC,KAAK,CAACE,kBAAzB,GAA8CuE,MAAM,CAAC5H,KAAP,CAAamI,aAA3D,GAA2EP,MAAM,CAAC5H,KAAP,CAAaoI,aANnF,CAAP;AAQD,OATM,CAAP;AAUD;AAED;AACJ;AACA;;AArBK,GAlJqC,EAyKrC;AACD7H,IAAAA,GAAG,EAAE,YADJ;AAEDX,IAAAA,KAAK,EAAE,SAASyI,UAAT,GAAsB;AAC3B,UAAI,KAAKrI,KAAL,CAAWsI,QAAf,EAAyB;AACvB,eAAOxH,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CAA8B,KAA9B,EAAqC;AAAES,UAAAA,GAAG,EAAElH,YAAY,CAACG,OAApB;AAA6BuG,UAAAA,SAAS,EAAE,YAAxC;AAAsDS,UAAAA,GAAG,EAAE;AAA3D,SAArC,CAAP;AACD;AACF;AAED;AACJ;AACA;;AAVK,GAzKqC,EAqLrC;AACDjI,IAAAA,GAAG,EAAE,aADJ;AAEDX,IAAAA,KAAK,EAAE,SAAS6I,WAAT,GAAuB;AAC5B,UAAI,KAAKzI,KAAL,CAAW0I,SAAf,EAA0B;AACxB,eAAO5H,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CACL,GADK,EAEL;AAAEC,UAAAA,SAAS,EAAE,KAAK/H,KAAL,CAAW2I,UAAxB;AAAoCV,UAAAA,KAAK,EAAE,KAAKjI,KAAL,CAAW4I;AAAtD,SAFK,EAGL,KAAK5I,KAAL,CAAW6I,KAHN,CAAP;AAKD;AACF;AAED;AACJ;AACA;;AAdK,GArLqC,EAqMrC;AACDtI,IAAAA,GAAG,EAAE,eADJ;AAEDX,IAAAA,KAAK,EAAE,SAASkJ,aAAT,GAAyB;AAC9B,aAAOhI,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CACL,KADK,EAEL;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAFK,EAGLjH,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CACE3G,eAAe,CAACK,OADlB,EAEE;AAAEuH,QAAAA,cAAc,EAAE,MAAlB;AAA0BC,QAAAA,cAAc,EAAE,MAA1C;AAAkDf,QAAAA,KAAK,EAAEpF;AAAzD,OAFF,EAGE,KAAKoG,qBAAL,EAHF,CAHK,CAAP;AASD;AAZA,GArMqC,EAkNrC;AACD1I,IAAAA,GAAG,EAAE,uBADJ;AAEDX,IAAAA,KAAK,EAAE,SAASqJ,qBAAT,GAAiC;AACtC,UAAIC,MAAM,GAAG,IAAb;;AAEA,aAAO,KAAKxF,KAAL,CAAWC,QAAX,CAAoBkE,GAApB,CAAwB,UAAUV,OAAV,EAAmBM,KAAnB,EAA0B;AACvD,eAAO3G,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CACL,KADK,EAEL;AAAEvH,UAAAA,GAAG,EAAEkH,KAAP;AAAcM,UAAAA,SAAS,EAAE;AAAzB,SAFK,EAGLjH,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CACE,KADF,EAEE;AAAEC,UAAAA,SAAS,EAAE,aAAb;AAA4BoB,UAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AACpD,mBAAOD,MAAM,CAAChC,WAAP,CAAmBC,OAAnB,CAAP;AACD;AAFH,SAFF,EAKE,GALF,CAHK,EAULrG,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CAA8B,KAA9B,EAAqC;AAAES,UAAAA,GAAG,EAAEpB,OAAP;AAAgBY,UAAAA,SAAS,EAAE,eAA3B;AAA4CS,UAAAA,GAAG,EAAE;AAAjD,SAArC,CAVK,CAAP;AAYD,OAbM,CAAP;AAcD;AAED;AACJ;AACA;;AAvBK,GAlNqC,EA2OrC;AACDjI,IAAAA,GAAG,EAAE,mBADJ;AAEDX,IAAAA,KAAK,EAAE,SAASwE,iBAAT,GAA6B;AAClC,WAAKJ,YAAL,CAAkBoF,KAAlB;AACD;AAJA,GA3OqC,EAgPrC;AACD7I,IAAAA,GAAG,EAAE,eADJ;AAEDX,IAAAA,KAAK,EAAE,SAASyJ,aAAT,GAAyB;AAC9B,WAAKzE,QAAL,CAAc;AAAEjB,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AACD;AAJA,GAhPqC,EAqPrC;AACDpD,IAAAA,GAAG,EAAE,QADJ;AAEDX,IAAAA,KAAK,EAAE,SAAS0J,MAAT,GAAkB;AACvB,UAAIC,MAAM,GAAG,IAAb;;AAEA,aAAOzI,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CACL,KADK,EAEL;AAAEC,QAAAA,SAAS,EAAE,kBAAkB,KAAK/H,KAAL,CAAW+H,SAA1C;AAAqDE,QAAAA,KAAK,EAAE,KAAKjI,KAAL,CAAWiI;AAAvE,OAFK,EAGLnH,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CACE,KADF,EAEE;AAAEC,QAAAA,SAAS,EAAE,eAAb;AAA8BE,QAAAA,KAAK,EAAE,KAAKjI,KAAL,CAAWwJ;AAAhD,OAFF,EAGE,KAAKnB,UAAL,EAHF,EAIE,KAAKI,WAAL,EAJF,EAKE3H,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CACE,KADF,EAEE;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAFF,EAGE,KAAKJ,YAAL,EAHF,CALF,EAUE7G,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CACE,QADF,EAEE;AACElC,QAAAA,IAAI,EAAE,KAAK5F,KAAL,CAAWyJ,UADnB;AAEE1B,QAAAA,SAAS,EAAE,sBAAsB,KAAK/H,KAAL,CAAW0J,eAF9C;AAGEzB,QAAAA,KAAK,EAAE,KAAKjI,KAAL,CAAW2J,YAHpB;AAIER,QAAAA,OAAO,EAAE,KAAK/E;AAJhB,OAFF,EAQE,KAAKpE,KAAL,CAAW4J,UARb,CAVF,EAoBE9I,OAAO,CAACU,OAAR,CAAgBsG,aAAhB,CAA8B,OAA9B,EAAuC;AACrClC,QAAAA,IAAI,EAAE,MAD+B;AAErCiE,QAAAA,GAAG,EAAE,SAASA,GAAT,CAAaC,KAAb,EAAoB;AACvB,iBAAOP,MAAM,CAACvF,YAAP,GAAsB8F,KAA7B;AACD,SAJoC;AAKrCpE,QAAAA,IAAI,EAAE,KAAK1F,KAAL,CAAW0F,IALoB;AAMrCqE,QAAAA,QAAQ,EAAE,CAAC,KAAK/J,KAAL,CAAWiG,WANe;AAOrCxB,QAAAA,QAAQ,EAAE,KAAKR,UAPsB;AAQrCkF,QAAAA,OAAO,EAAE,KAAKhF,aARuB;AASrC6F,QAAAA,MAAM,EAAE,KAAKhK,KAAL,CAAWgK;AATkB,OAAvC,CApBF,EA+BE,KAAKhK,KAAL,CAAWiK,WAAX,GAAyB,KAAKnB,aAAL,EAAzB,GAAgD,IA/BlD,CAHK,CAAP;AAqCD;AA1CA,GArPqC,CAA5B,CAAZ;;AAkSA,SAAOxF,yBAAP;AACD,CAvT+B,CAuT9BxC,OAAO,CAACU,OAAR,CAAgB0I,SAvTc,CAAhC;;AAyTA5G,yBAAyB,CAAC6G,YAA1B,GAAyC;AACvCpC,EAAAA,SAAS,EAAE,EAD4B;AAEvCyB,EAAAA,kBAAkB,EAAE,EAFmB;AAGvCE,EAAAA,eAAe,EAAE,EAHsB;AAIvCC,EAAAA,YAAY,EAAE,EAJyB;AAKvCM,EAAAA,WAAW,EAAE,KAL0B;AAMvCD,EAAAA,MAAM,EAAE,SAN+B;AAOvCtE,EAAAA,IAAI,EAAE,EAPiC;AAQvC4C,EAAAA,QAAQ,EAAE,IAR6B;AASvCsB,EAAAA,UAAU,EAAE,eAT2B;AAUvCH,EAAAA,UAAU,EAAE,QAV2B;AAWvCf,EAAAA,SAAS,EAAE,IAX4B;AAYvCG,EAAAA,KAAK,EAAE,2CAZgC;AAavCD,EAAAA,WAAW,EAAE,EAb0B;AAcvCD,EAAAA,UAAU,EAAE,EAd2B;AAevC3D,EAAAA,YAAY,EAAE,CAAC,MAAD,EAAS,OAAT,EAAkB,MAAlB,EAA0B,MAA1B,CAfyB;AAgBvCe,EAAAA,WAAW,EAAE,OAhB0B;AAiBvCoC,EAAAA,aAAa,EAAE,uBAjBwB;AAkBvCC,EAAAA,aAAa,EAAE,oCAlBwB;AAmBvCJ,EAAAA,UAAU,EAAE,EAnB2B;AAoBvCC,EAAAA,KAAK,EAAE,EApBgC;AAqBvCC,EAAAA,UAAU,EAAE,EArB2B;AAsBvCjC,EAAAA,WAAW,EAAE,KAtB0B;AAuBvCxB,EAAAA,QAAQ,EAAE,SAASA,QAAT,GAAoB,CAAE,CAvBO;AAwBvCZ,EAAAA,aAAa,EAAE;AAxBwB,CAAzC;AA2BAP,yBAAyB,CAAC8G,SAA1B,GAAsC;AACpCnC,EAAAA,KAAK,EAAEhH,WAAW,CAACO,OAAZ,CAAoB6I,MADS;AAEpCb,EAAAA,kBAAkB,EAAEvI,WAAW,CAACO,OAAZ,CAAoB6I,MAFJ;AAGpCtC,EAAAA,SAAS,EAAE9G,WAAW,CAACO,OAAZ,CAAoB8I,MAHK;AAIpC7F,EAAAA,QAAQ,EAAExD,WAAW,CAACO,OAAZ,CAAoB+I,IAJM;AAKpCC,EAAAA,QAAQ,EAAEvJ,WAAW,CAACO,OAAZ,CAAoB+I,IALM;AAMpCb,EAAAA,eAAe,EAAEzI,WAAW,CAACO,OAAZ,CAAoB8I,MAND;AAOpCX,EAAAA,YAAY,EAAE1I,WAAW,CAACO,OAAZ,CAAoB6I,MAPE;AAQpCZ,EAAAA,UAAU,EAAExI,WAAW,CAACO,OAAZ,CAAoB8I,MARI;AASpCL,EAAAA,WAAW,EAAEhJ,WAAW,CAACO,OAAZ,CAAoBiJ,IATG;AAUpCT,EAAAA,MAAM,EAAE/I,WAAW,CAACO,OAAZ,CAAoB8I,MAVQ;AAWpC5E,EAAAA,IAAI,EAAEzE,WAAW,CAACO,OAAZ,CAAoB8I,MAXU;AAYpChC,EAAAA,QAAQ,EAAErH,WAAW,CAACO,OAAZ,CAAoBiJ,IAZM;AAapCb,EAAAA,UAAU,EAAE3I,WAAW,CAACO,OAAZ,CAAoB8I,MAbI;AAcpC5B,EAAAA,SAAS,EAAEzH,WAAW,CAACO,OAAZ,CAAoBiJ,IAdK;AAepC5B,EAAAA,KAAK,EAAE5H,WAAW,CAACO,OAAZ,CAAoB8I,MAfS;AAgBpC1B,EAAAA,WAAW,EAAE3H,WAAW,CAACO,OAAZ,CAAoB6I,MAhBG;AAiBpC1B,EAAAA,UAAU,EAAE1H,WAAW,CAACO,OAAZ,CAAoB8I,MAjBI;AAkBpCtF,EAAAA,YAAY,EAAE/D,WAAW,CAACO,OAAZ,CAAoBkJ,KAlBE;AAmBpC3E,EAAAA,WAAW,EAAE9E,WAAW,CAACO,OAAZ,CAAoBmJ,MAnBG;AAoBpCxC,EAAAA,aAAa,EAAElH,WAAW,CAACO,OAAZ,CAAoB8I,MApBC;AAqBpClC,EAAAA,aAAa,EAAEnH,WAAW,CAACO,OAAZ,CAAoB8I,MArBC;AAsBpCtC,EAAAA,UAAU,EAAE/G,WAAW,CAACO,OAAZ,CAAoB8I,MAtBI;AAuBpCpC,EAAAA,UAAU,EAAEjH,WAAW,CAACO,OAAZ,CAAoB6I,MAvBI;AAwBpCpE,EAAAA,WAAW,EAAEhF,WAAW,CAACO,OAAZ,CAAoBiJ,IAxBG;AAyBpC5G,EAAAA,aAAa,EAAE5C,WAAW,CAACO,OAAZ,CAAoBkJ;AAzBC,CAAtC;AA4BA/K,OAAO,CAAC6B,OAAR,GAAkB8B,yBAAlB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nrequire('./index.css');\n\nvar _reactFlipMove = require('react-flip-move');\n\nvar _reactFlipMove2 = _interopRequireDefault(_reactFlipMove);\n\nvar _UploadIcon = require('./UploadIcon.svg');\n\nvar _UploadIcon2 = _interopRequireDefault(_UploadIcon);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar styles = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  flexWrap: \"wrap\",\n  width: \"100%\"\n};\n\nvar ERROR = {\n  NOT_SUPPORTED_EXTENSION: 'NOT_SUPPORTED_EXTENSION',\n  FILESIZE_TOO_LARGE: 'FILESIZE_TOO_LARGE'\n};\n\nvar ReactImageUploadComponent = function (_React$Component) {\n  _inherits(ReactImageUploadComponent, _React$Component);\n\n  function ReactImageUploadComponent(props) {\n    _classCallCheck(this, ReactImageUploadComponent);\n\n    var _this = _possibleConstructorReturn(this, (ReactImageUploadComponent.__proto__ || Object.getPrototypeOf(ReactImageUploadComponent)).call(this, props));\n\n    _this.state = {\n      pictures: [].concat(_toConsumableArray(props.defaultImages)),\n      files: [],\n      fileErrors: []\n    };\n    _this.inputElement = '';\n    _this.onDropFile = _this.onDropFile.bind(_this);\n    _this.onUploadClick = _this.onUploadClick.bind(_this);\n    _this.triggerFileUpload = _this.triggerFileUpload.bind(_this);\n    return _this;\n  }\n\n  _createClass(ReactImageUploadComponent, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      if (prevState.files !== this.state.files) {\n        this.props.onChange(this.state.files, this.state.pictures);\n      }\n    }\n\n    /*\n     Load image at the beggining if defaultImage prop exists\n     */\n\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.defaultImages !== this.props.defaultImages) {\n        this.setState({ pictures: nextProps.defaultImages });\n      }\n    }\n\n    /*\n    Check file extension (onDropFile)\n    */\n\n  }, {\n    key: 'hasExtension',\n    value: function hasExtension(fileName) {\n      var pattern = '(' + this.props.imgExtension.join('|').replace(/\\./g, '\\\\.') + ')$';\n      return new RegExp(pattern, 'i').test(fileName);\n    }\n\n    /*\n     Handle file validation\n     */\n\n  }, {\n    key: 'onDropFile',\n    value: function onDropFile(e) {\n      var _this2 = this;\n\n      var files = e.target.files;\n      var allFilePromises = [];\n      var fileErrors = [];\n\n      // Iterate over all uploaded files\n      for (var i = 0; i < files.length; i++) {\n        var file = files[i];\n        var fileError = {\n          name: file.name\n        };\n        // Check for file extension\n        if (!this.hasExtension(file.name)) {\n          fileError = Object.assign(fileError, {\n            type: ERROR.NOT_SUPPORTED_EXTENSION\n          });\n          fileErrors.push(fileError);\n          continue;\n        }\n        // Check for file size\n        if (file.size > this.props.maxFileSize) {\n          fileError = Object.assign(fileError, {\n            type: ERROR.FILESIZE_TOO_LARGE\n          });\n          fileErrors.push(fileError);\n          continue;\n        }\n\n        allFilePromises.push(this.readFile(file));\n      }\n\n      this.setState({\n        fileErrors: fileErrors\n      });\n\n      var singleImage = this.props.singleImage;\n\n\n      Promise.all(allFilePromises).then(function (newFilesData) {\n        var dataURLs = singleImage ? [] : _this2.state.pictures.slice();\n        var files = singleImage ? [] : _this2.state.files.slice();\n\n        newFilesData.forEach(function (newFileData) {\n          dataURLs.push(newFileData.dataURL);\n          files.push(newFileData.file);\n        });\n\n        _this2.setState({ pictures: dataURLs, files: files });\n      });\n    }\n  }, {\n    key: 'onUploadClick',\n    value: function onUploadClick(e) {\n      // Fixes https://github.com/JakeHartnell/react-images-upload/issues/55\n      e.target.value = null;\n    }\n\n    /*\n       Read a file and return a promise that when resolved gives the file itself and the data URL\n     */\n\n  }, {\n    key: 'readFile',\n    value: function readFile(file) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n\n        // Read the image via FileReader API and save image result in state.\n        reader.onload = function (e) {\n          // Add the file name to the data URL\n          var dataURL = e.target.result;\n          dataURL = dataURL.replace(\";base64\", ';name=' + file.name + ';base64');\n          resolve({ file: file, dataURL: dataURL });\n        };\n\n        reader.readAsDataURL(file);\n      });\n    }\n\n    /*\n     Remove the image from state\n     */\n\n  }, {\n    key: 'removeImage',\n    value: function removeImage(picture) {\n      var _this3 = this;\n\n      var removeIndex = this.state.pictures.findIndex(function (e) {\n        return e === picture;\n      });\n      var filteredPictures = this.state.pictures.filter(function (e, index) {\n        return index !== removeIndex;\n      });\n      var filteredFiles = this.state.files.filter(function (e, index) {\n        return index !== removeIndex;\n      });\n\n      this.setState({ pictures: filteredPictures, files: filteredFiles }, function () {\n        _this3.props.onChange(_this3.state.files, _this3.state.pictures);\n      });\n    }\n\n    /*\n     Check if any errors && render\n     */\n\n  }, {\n    key: 'renderErrors',\n    value: function renderErrors() {\n      var _this4 = this;\n\n      var fileErrors = this.state.fileErrors;\n\n      return fileErrors.map(function (fileError, index) {\n        return _react2.default.createElement(\n          'div',\n          { className: 'errorMessage ' + _this4.props.errorClass, key: index, style: _this4.props.errorStyle },\n          '* ',\n          fileError.name,\n          ' ',\n          fileError.type === ERROR.FILESIZE_TOO_LARGE ? _this4.props.fileSizeError : _this4.props.fileTypeError\n        );\n      });\n    }\n\n    /*\n     Render the upload icon\n     */\n\n  }, {\n    key: 'renderIcon',\n    value: function renderIcon() {\n      if (this.props.withIcon) {\n        return _react2.default.createElement('img', { src: _UploadIcon2.default, className: 'uploadIcon', alt: 'Upload Icon' });\n      }\n    }\n\n    /*\n     Render label\n     */\n\n  }, {\n    key: 'renderLabel',\n    value: function renderLabel() {\n      if (this.props.withLabel) {\n        return _react2.default.createElement(\n          'p',\n          { className: this.props.labelClass, style: this.props.labelStyles },\n          this.props.label\n        );\n      }\n    }\n\n    /*\n     Render preview images\n     */\n\n  }, {\n    key: 'renderPreview',\n    value: function renderPreview() {\n      return _react2.default.createElement(\n        'div',\n        { className: 'uploadPicturesWrapper' },\n        _react2.default.createElement(\n          _reactFlipMove2.default,\n          { enterAnimation: 'fade', leaveAnimation: 'fade', style: styles },\n          this.renderPreviewPictures()\n        )\n      );\n    }\n  }, {\n    key: 'renderPreviewPictures',\n    value: function renderPreviewPictures() {\n      var _this5 = this;\n\n      return this.state.pictures.map(function (picture, index) {\n        return _react2.default.createElement(\n          'div',\n          { key: index, className: 'uploadPictureContainer' },\n          _react2.default.createElement(\n            'div',\n            { className: 'deleteImage', onClick: function onClick() {\n                return _this5.removeImage(picture);\n              } },\n            'X'\n          ),\n          _react2.default.createElement('img', { src: picture, className: 'uploadPicture', alt: 'preview' })\n        );\n      });\n    }\n\n    /*\n     On button click, trigger input file to open\n     */\n\n  }, {\n    key: 'triggerFileUpload',\n    value: function triggerFileUpload() {\n      this.inputElement.click();\n    }\n  }, {\n    key: 'clearPictures',\n    value: function clearPictures() {\n      this.setState({ pictures: [] });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this6 = this;\n\n      return _react2.default.createElement(\n        'div',\n        { className: \"fileUploader \" + this.props.className, style: this.props.style },\n        _react2.default.createElement(\n          'div',\n          { className: 'fileContainer', style: this.props.fileContainerStyle },\n          this.renderIcon(),\n          this.renderLabel(),\n          _react2.default.createElement(\n            'div',\n            { className: 'errorsContainer' },\n            this.renderErrors()\n          ),\n          _react2.default.createElement(\n            'button',\n            {\n              type: this.props.buttonType,\n              className: \"chooseFileButton \" + this.props.buttonClassName,\n              style: this.props.buttonStyles,\n              onClick: this.triggerFileUpload\n            },\n            this.props.buttonText\n          ),\n          _react2.default.createElement('input', {\n            type: 'file',\n            ref: function ref(input) {\n              return _this6.inputElement = input;\n            },\n            name: this.props.name,\n            multiple: !this.props.singleImage,\n            onChange: this.onDropFile,\n            onClick: this.onUploadClick,\n            accept: this.props.accept\n          }),\n          this.props.withPreview ? this.renderPreview() : null\n        )\n      );\n    }\n  }]);\n\n  return ReactImageUploadComponent;\n}(_react2.default.Component);\n\nReactImageUploadComponent.defaultProps = {\n  className: '',\n  fileContainerStyle: {},\n  buttonClassName: \"\",\n  buttonStyles: {},\n  withPreview: false,\n  accept: \"image/*\",\n  name: \"\",\n  withIcon: true,\n  buttonText: \"Choose images\",\n  buttonType: \"button\",\n  withLabel: true,\n  label: \"Max file size: 5mb, accepted: jpg|gif|png\",\n  labelStyles: {},\n  labelClass: \"\",\n  imgExtension: ['.jpg', '.jpeg', '.gif', '.png'],\n  maxFileSize: 5242880,\n  fileSizeError: \" file size is too big\",\n  fileTypeError: \" is not a supported file extension\",\n  errorClass: \"\",\n  style: {},\n  errorStyle: {},\n  singleImage: false,\n  onChange: function onChange() {},\n  defaultImages: []\n};\n\nReactImageUploadComponent.propTypes = {\n  style: _propTypes2.default.object,\n  fileContainerStyle: _propTypes2.default.object,\n  className: _propTypes2.default.string,\n  onChange: _propTypes2.default.func,\n  onDelete: _propTypes2.default.func,\n  buttonClassName: _propTypes2.default.string,\n  buttonStyles: _propTypes2.default.object,\n  buttonType: _propTypes2.default.string,\n  withPreview: _propTypes2.default.bool,\n  accept: _propTypes2.default.string,\n  name: _propTypes2.default.string,\n  withIcon: _propTypes2.default.bool,\n  buttonText: _propTypes2.default.string,\n  withLabel: _propTypes2.default.bool,\n  label: _propTypes2.default.string,\n  labelStyles: _propTypes2.default.object,\n  labelClass: _propTypes2.default.string,\n  imgExtension: _propTypes2.default.array,\n  maxFileSize: _propTypes2.default.number,\n  fileSizeError: _propTypes2.default.string,\n  fileTypeError: _propTypes2.default.string,\n  errorClass: _propTypes2.default.string,\n  errorStyle: _propTypes2.default.object,\n  singleImage: _propTypes2.default.bool,\n  defaultImages: _propTypes2.default.array\n};\n\nexports.default = ReactImageUploadComponent;\n"]},"metadata":{},"sourceType":"script"}