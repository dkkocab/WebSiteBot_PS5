{"version":3,"sources":["../src/detectFiberTags.js"],"names":["getFiber","element","container","global","document","createElement","inst","Tester","React","Component","ReactDOM","render","_reactInternalFiber","child","getLazyFiber","LazyComponent","SuspenseWrapper","Suspense","fallback","module","exports","detectFiberTags","supportsMode","StrictMode","supportsContext","createContext","supportsForwardRef","forwardRef","supportsMemo","memo","supportsProfiler","unstable_Profiler","Profiler","supportsSuspense","supportsLazy","lazy","Fn","Cls","Ctx","FwdRef","props","ref","HostRoot","tag","ClassComponent","Fragment","FunctionalComponent","MemoSFC","MemoClass","HostPortal","createPortal","HostComponent","HostText","Mode","ContextConsumer","Consumer","ContextProvider","Provider","value","ForwardRef","id","onRender","Lazy"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { fakeDynamicImport } from 'enzyme-adapter-utils';\n\nfunction getFiber(element) {\n  const container = global.document.createElement('div');\n  let inst = null;\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return element;\n    }\n  }\n  ReactDOM.render(React.createElement(Tester), container);\n  return inst._reactInternalFiber.child;\n}\n\nfunction getLazyFiber(LazyComponent) {\n  const container = global.document.createElement('div');\n  let inst = null;\n  // eslint-disable-next-line react/prefer-stateless-function\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return React.createElement(LazyComponent);\n    }\n  }\n  // eslint-disable-next-line react/prefer-stateless-function\n  class SuspenseWrapper extends React.Component {\n    render() {\n      return React.createElement(\n        React.Suspense,\n        { fallback: false },\n        React.createElement(Tester),\n      );\n    }\n  }\n  ReactDOM.render(React.createElement(SuspenseWrapper), container);\n  return inst._reactInternalFiber.child;\n}\n\nmodule.exports = function detectFiberTags() {\n  const supportsMode = typeof React.StrictMode !== 'undefined';\n  const supportsContext = typeof React.createContext !== 'undefined';\n  const supportsForwardRef = typeof React.forwardRef !== 'undefined';\n  const supportsMemo = typeof React.memo !== 'undefined';\n  const supportsProfiler = typeof React.unstable_Profiler !== 'undefined' || typeof React.Profiler !== 'undefined';\n  const supportsSuspense = typeof React.Suspense !== 'undefined';\n  const supportsLazy = typeof React.lazy !== 'undefined';\n\n  function Fn() {\n    return null;\n  }\n  // eslint-disable-next-line react/prefer-stateless-function\n  class Cls extends React.Component {\n    render() {\n      return null;\n    }\n  }\n  let Ctx = null;\n  let FwdRef = null;\n  let LazyComponent = null;\n  if (supportsContext) {\n    Ctx = React.createContext();\n  }\n  if (supportsForwardRef) {\n    // React will warn if we don't have both arguments.\n    // eslint-disable-next-line no-unused-vars\n    FwdRef = React.forwardRef((props, ref) => null);\n  }\n  if (supportsLazy) {\n    LazyComponent = React.lazy(() => fakeDynamicImport(() => null));\n  }\n\n  return {\n    HostRoot: getFiber('test').return.return.tag, // Go two levels above to find the root\n    ClassComponent: getFiber(React.createElement(Cls)).tag,\n    Fragment: getFiber([['nested']]).tag,\n    FunctionalComponent: getFiber(React.createElement(Fn)).tag,\n    MemoSFC: supportsMemo\n      ? getFiber(React.createElement(React.memo(Fn))).tag\n      : -1,\n    MemoClass: supportsMemo\n      ? getFiber(React.createElement(React.memo(Cls))).tag\n      : -1,\n    HostPortal: getFiber(ReactDOM.createPortal(null, global.document.createElement('div'))).tag,\n    HostComponent: getFiber(React.createElement('span')).tag,\n    HostText: getFiber('text').tag,\n    Mode: supportsMode\n      ? getFiber(React.createElement(React.StrictMode)).tag\n      : -1,\n    ContextConsumer: supportsContext\n      ? getFiber(React.createElement(Ctx.Consumer, null, () => null)).tag\n      : -1,\n    ContextProvider: supportsContext\n      ? getFiber(React.createElement(Ctx.Provider, { value: null }, null)).tag\n      : -1,\n    ForwardRef: supportsForwardRef\n      ? getFiber(React.createElement(FwdRef)).tag\n      : -1,\n    Profiler: supportsProfiler\n      ? getFiber(React.createElement((React.Profiler || React.unstable_Profiler), { id: 'mock', onRender() {} })).tag\n      : -1,\n    Suspense: supportsSuspense\n      ? getFiber(React.createElement(React.Suspense, { fallback: false })).tag\n      : -1,\n    Lazy: supportsLazy\n      ? getLazyFiber(LazyComponent).tag\n      : -1,\n  };\n};\n"],"file":"detectFiberTags.js"}